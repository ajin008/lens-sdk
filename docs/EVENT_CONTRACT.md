# Lens Event Contract (SDK â†’ Backend)

This document defines the exact payload sent by the Lens SDK
to the Lens ingestion API.

This contract is shared between SDK and backend and must not
be changed lightly.

---

## Endpoint

POST /v1/events

---

## Headers

Authorization: Bearer <LENS_API_KEY>
Content-Type: application/json

---

## Request Body (JSON)

```json
{
  "model": "gpt-4o-mini",
  "latency_ms": 842,
  "tokens": 512,
  "cost_usd": 0.0021,
  "status": "success",

  "user_id": "user_123",
  "feature": "chat_completion",
  "metadata": {
    "prompt_version": "v3"
  },

  "environment": "production",
  "sdk_version": "0.1.0",
  "runtime": "node",
  "timestamp": "2025-12-26T12:00:00Z"
}
```

Content must be **identical**.

This avoids:

- SDK drift
- Backend guessing
- Silent mismatches

---

## Optional (but recommended): Type mirror (NO LOGIC)

Now we add **types only**, no behavior.

### Create:

## Internal Metadata (SDK-generated)

These fields are generated by the SDK for debugging and tracing:

- request_id
- sent_at
- sdk_version
- runtime

These fields are not required from SDK users.
